# -*- shell-script -*-
PGUSER='temboard'
PGGROUP='temboard'
CONFIGDIR='/etc/temboard'
CONFIGFILE=$CONFIGDIR'/temboard.conf'
RUNDIR='/var/run/temboard'
LOGDIR='/var/log/temboard'
LOGFILE='/var/log/temboard/temboard.log'
LOGROTATEFILE='/etc/logrotate.d/temboard'

[ $(/usr/bin/getent group $PGGROUP) ] || /usr/sbin/groupadd $PGGROUP
if ! /usr/bin/id -u $PGUSER > /dev/null 2>&1; then
        /usr/sbin/adduser --system --no-create-home --disabled-password --disabled-login --ingroup $PGGROUP $PGUSER > /dev/null 2>&1
fi

if ! [ -d $CONFIGDIR ]; then
        /bin/mkdir $CONFIGDIR
fi

if ! [ -d $RUNDIR ]; then
        /bin/mkdir $RUNDIR
fi

if ! [ -d $LOGDIR ]; then
        /bin/mkdir $LOGDIR
fi

if ! [ -f $LOGFILE ]; then
        /usr/bin/touch $LOGFILE
fi

if ! [ -f $LOGROTATEFILE ]; then
	/usr/bin/install -m 644 /usr/share/temboard/quickstart/temboard.logrotate $LOGROTATEFILE
fi

/bin/chown -R $PGUSER.$PGGROUP $CONFIGDIR
/bin/chown -R $PGUSER.$PGGROUP $RUNDIR
/bin/chown -R $PGUSER.$PGGROUP $LOGDIR
/bin/chown $PGUSER.$PGGROUP $LOGFILE
