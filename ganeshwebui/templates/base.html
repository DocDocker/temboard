<!DOCTYPE html>
<html lang="en">

<head>
   	<meta charset="utf-8">
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
   	<meta name="description" content="">
   	<meta name="author" content="">

	<title>{% block title %} {% end %}</title>
   	<!-- Bootstrap -->
   	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<!-- MetisMenu CSS -->
   	<link href="/css/metisMenu.min.css" rel="stylesheet">

   	<!-- Timeline CSS -->
   	<link href="/css/timeline.css" rel="stylesheet">

   	<!-- Custom CSS -->
   	<link href="/css/sb-admin-2.css" rel="stylesheet">

   	<!-- Custom Fonts -->
   	<link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">

   	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
   	<!--[if lt IE 9]>
   		<script src="/js/html5shiv.js"></script>
   		<script src="/js/respond.min.js"></script>
   	<![endif]-->
	<!-- DataTables CSS -->
	<link href="/css/dataTables.bootstrap.min.css" rel="stylesheet">
	<!-- Multiselect -->
	<link href="/css/bootstrap-multiselect.css" rel="stylesheet">
	<!-- DataTables Responsive CSS -->
	<link href="/css/ganeshwebui.css" rel="stylesheet">
	<!-- CodeMirror -->
	<script src="/codemirror/lib/codemirror.js"></script>
	<link rel="stylesheet" href="/codemirror/lib/codemirror.css">
	<script src="/codemirror/mode/javascript/javascript.js"></script>
	<script src="/codemirror/addon/selection/active-line.js"></script>
	<style type="text/css">
      .CodeMirror {
        border: 1px solid #eee;
        height: auto;
		font-size: 12px;
      }
    </style>
</head>
<body>
	<div id="modalError" /></div>
	<div id="wrapper">
		<script src="/js/jquery-2.1.4.min.js"></script>
		<script src="/js/bootstrap.min.js"></script>
		<!-- Metis Menu Plugin JavaScript -->
		<script src="/js/metisMenu.min.js"></script>
		<!-- Custom Theme JavaScript -->
		<script src="/js/sb-admin-2.js"></script>
		{% if nav %}
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation" id="topNav">
			<div class="navbar-header" id="divHeaderLogo">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-default sidebar" role="navigation">
				<div class="sidebar-nav navbar-collapse">
					<ul class="nav" id="side-menu">
						<li><h1 id="logo">Ganesh</h1></li>
						<li><a href="/home"><i class="fa fa-home fa-fw"></i> Home</a></li>
						{% try %}
						{% if instance %}
						<li>
							<table id="tableHeaderInfo">
								<tr><td>Hostname: </td><td class="pull-right">{{instance.hostname}}</td></tr>
								<tr><td>Groups: </td><td class="pull-right">{% for group in instance.groups %} {{group.group_name}}{% end %}</td></tr>
								<tr><td>Host: </td><td class="pull-right">{{instance.agent_address}}</td></tr>
								<tr><td>PG data: </td><td class="pull-right">{{instance.pg_data}}</td></tr>
								<tr><td>PG Port: </td><td class="pull-right">{{instance.pg_port}}</td></tr>
								<tr><td>PG Version: </td><td class="pull-right">{{instance.pg_version}}</td></tr>
							</table>
						</li>
						<li><a href="/server/{{instance.agent_address}}/{{instance.agent_port}}/dashboard"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a></li>
						<li><a href="/server/{{instance.agent_address}}/{{instance.agent_port}}/activity"><i class="fa fa-bars fa-fw"></i> Activity</a></li>
						<li>
		  					<a href="#"><i class="fa fa-cog"></i> Settings<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li><a href="/server/{{instance.agent_address}}/{{instance.agent_port}}/settings/configuration">Configuration</a></li>
 								<li>
		   							<form method="get" action="/server/{{instance.agent_address}}/{{instance.agent_port}}/settings/configuration" class="form" id="formSearchSettings"  role="search">
										<label class="sr-only" for="selectServer">Search</label>
										<div class="input-group">
											<input class="form-control input-sm" id="inputSearchSettings" name="filter" placeholder="Find in settings"/>
											<span class="input-group-btn">
												<button type="submit" class="btn btn-sm btn-primary" id="buttonSearchSettings"><i class="glyphicon glyphicon-search"></i></button>
      										</span>
										</div>
	  								</form>
								</li>
								<li><a href="/server/{{instance.agent_address}}/{{instance.agent_port}}/settings/hba">Host Base Authentication</a></li>
								<li><a href="/server/{{instance.agent_address}}/{{instance.agent_port}}/settings/pg_ident">User Name Maps</a></li>
		  					</ul>
						</li>
						{% end %} 
						{% except %}
						{% end %} 
						<li><a href="/logout"><i class="glyphicon glyphicon-log-out"></i> Logout</a></li>
						{% try %}
						{% if role.is_admin %}
						<li>
		  					<a href="#"><i class="fa fa-wrench fa-fw"></i> Manage<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li><a href="/manage/users">User list</a></li>
								<li><a href="/manage/groups/role">User groups</a></li>
								<li><a href="/manage/instances">Instance list</a></li>
								<li><a href="/manage/groups/instance">Instance groups</a></li>
							</ul>
						</li>
						{% end %}
						{% except %}
						{% end %}
					</ul>
				</div>
				<!-- /.sidebar-collapse -->
			</div>
			<!-- /.navbar-static-side -->
		</nav>
		<script>
		// Popover activation
		$(function () {
  			$('[data-toggle="popover"]').popover()
		})
		$(function () {
  			$('[data-toggle="tooltip"]').tooltip()
		})
		</script>
		<div id="page-wrapper">
		{% else %}
		<div>
		{% end %}
			{% block content %} {% end %}
		</div>
	</div>
</body>
</html>
